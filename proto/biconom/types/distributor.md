# Модель: Distributor

## 1. Описание

**`Distributor`** — это ключевая модель, представляющая участника, узел или партнера в одной из иерархических сетей (`Network`). Эту сущность можно рассматривать как "бизнес-единицу" или "партнерский узел", который может строить свою собственную структуру и владеть слотами (`Slot`).

## 2. Назначение и решаемые задачи

Модель `Distributor` предназначена для построения и управления партнерскими и многоуровневыми сетями.

### Ключевые задачи:
- **Идентификация**: Каждый дистрибьютор имеет числовой `id`, а также может иметь необязательный, но уникальный `username` (например, "top_leader" или "my_brand"), который можно использовать для поиска и в реферальных ссылках.
- **Построение иерархии**: Поля `parent_id` и `parent_branch_number` позволяют выстраивать древовидную структуру.
- **Владение**: `Distributor` принадлежит одному `Account`, что связывает его с конкретным пользователем или сообществом.
- **Управление состоянием через политики**: Поле `policy_id` позволяет применять к дистрибьютору централизованно управляемые политики.

## 3. Ключевые поля и концепции

- `id`: Уникальный числовой идентификатор.
- `username`: Необязательное, но уникальное человекочитаемое имя.
- `account_id`: Связывает дистрибьютора с его владельцем — `Account`.
- `parent_id`: Определяет иерархию, указывая на вышестоящего дистрибьютора.
- `network_id`: Указывает, к какой глобальной сети (`Network`) принадлежит этот дистрибьютор.
- `policy_id`: Обязательное поле, связывающее дистрибьютора с его политикой.

## 4. Сценарии использования (кейсы)

- **Регистрация нового партнера**: В системе создается `Distributor`, и ему может быть присвоен `username`, если он не занят.
- **Поиск по имени**: Администратор или пользователь может найти дистрибьютора, введя его `username`.
- **Публичный профиль**: `username` может использоваться в URL публичной страницы дистрибьютора.

## 5. Связи с другими моделями

- **`Account`**: `Distributor` **принадлежит** одному `Account`.
- **`Network`**: `Distributor` **является частью** одной `Network`.
- **`DistributorPolicy`**: `Distributor` **управляется** одной политикой.
- **`Slot`**: `Distributor` **владеет** одним или несколькими `Slot`.
