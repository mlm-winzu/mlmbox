# Модель: Subject

## 1. Описание

**`Subject`** — это простая, но очень важная встраиваемая модель, которая представляет собой **типобезопасный указатель** на любую другую ключевую сущность в системе.

## 2. Назначение и решаемые задачи

Основная цель — создать универсальный и стандартизированный способ ссылаться на объект или субъект, над которым было совершено какое-либо действие (например, в `Activity.Event`).

### Ключевые задачи:
- **Типобезопасность**: Использование `oneof` гарантирует, что мы всегда знаем не только ID сущности, но и ее **тип**. Это защищает от ошибок и упрощает логику на бэкенде.
- **Переиспользуемость**: `Subject` может быть использован в любой модели, где нужно сослаться на другой объект (например, `Activity`, `Notification`, `AuditLog`).
- **Расширяемость**: В будущем можно легко добавить новые типы сущностей в `oneof entity`, не ломая существующую логику.

## 3. Ключевые поля и концепции

- `oneof entity`: Позволяет `Subject` содержать ID только **одного** типа сущности. Поля внутри `oneof` говорят сами за себя: `account_id`, `currency_id`, `bonus_id` и т.д.

## 4. Сценарии использования (кейсы)

- **В `Activity.Event`**:
  - `action`: `CURRENCY_STATUS_CHANGED`
  - `subject`: `{ currency_id: 10 }`
  - Это говорит нам: "Статус был изменен для Валюты с ID 10".

- **В будущей модели `Notification`**:
  - `message`: "Вам начислен новый бонус!"
  - `subject`: `{ bonus_id: 123 }`
  - Это позволяет фронтенду сделать уведомление кликабельным и вести пользователя прямо на страницу бонуса с ID 123.

## 5. Связи с другими моделями

- **`Activity.Event`**: `Event` **может содержать** один `Subject` для указания объекта действия.
