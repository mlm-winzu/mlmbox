# Модель: BonusPolicy

## 1. Описание

**`BonusPolicy`** — это модель, которая определяет набор правил для группы бонусов (`Bonus`). Ключевой особенностью является то, что **вся сложная логика расчета и условия начисления бонуса реализуются на стороне бэкенда**.

Эта политика является "меткой" или "триггером", который бэкенд использует для выбора правильного алгоритма расчета.

## 2. Назначение и решаемые задачи

Основная цель — создать гибкую связь между справочником бонусов и сложной, жестко запрограммированной бизнес-логикой.

### Ключевые задачи:
- **Идентификация логики**: `name` или `id` политики служат для бэкенда уникальным идентификатором, по которому он находит и запускает нужный код для расчета бонуса.
- **Централизованное управление**: Позволяет изменять `description` или другие метаданные для бонусов, не затрагивая код.

## 3. Ключевые поля и концепции

- `name`: Уникальное имя политики. Это основной ключ, который может быть использован в коде бэкенда для выбора алгоритма.
- `description`: Текстовое описание, поясняющее администратору, что делает эта политика.

## 4. Сценарии использования (кейсы)

- **Создание реферального бонуса**:
  1. На бэкенде пишется функция `calculateReferralBonus()`.
  2. В админ-панели создается `BonusPolicy` с `name`: "referral_v1".
  3. Бэкенд "знает", что если он встречает политику "referral_v1", он должен вызвать функцию `calculateReferralBonus()`.
- **Изменение логики**:
  1. Создается новая функция `calculateReferralBonusV2()`.
  2. Создается новая `BonusPolicy` с `name`: "referral_v2".
  3. Администратор в модели `Bonus` просто меняет `policy_id` со старой на новую, "переключая" бонус на новый алгоритм расчета без простоя и изменения кода.

## 5. Связи с другими моделями

- **`Bonus`**: `Bonus` **управляется** одной политикой.
