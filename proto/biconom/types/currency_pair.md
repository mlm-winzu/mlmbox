# Модель: CurrencyPair

## 1. Описание

**`CurrencyPair`** — это справочная модель, которая представляет собой **факт существования связи** между двумя валютами (`Currency`).

Она является ключевой, так как несет в себе два независимых уровня управления:
1.  **Операционный статус (`status`)**: Простой "рубильник", который определяет, можно ли сейчас проводить операции с этой парой.
2.  **Политика (`policy_id`)**: Определяет *КАК* именно можно проводить операции (правила, лимиты, комиссии и т.д.).

## 2. Назначение и решаемые задачи

Основная цель — создать исчерпывающий справочник всех валютных пар и централизованно управлять их операционной доступностью и правилами.

### Ключевые задачи:
- **Определение пар**: Фиксирует, какие валюты могут составлять пару.
- **Управление жизненным циклом**: Поле `status` позволяет мгновенно включать, отключать или архивировать пару.
- **Централизованное управление правилами**: Через `policy_id` позволяет применять к паре определенный набор бизнес-правил.

## 3. Ключевые поля и концепции

- `name`: Уникальное имя пары.
- `base_currency_id` / `quote_currency_id`: ID базовой и котируемой валют.
- `policy_id`: Обязательное поле, связывающее пару с ее политикой.
- `Status`: Вложенный `enum`, определяющий операционный статус по уровню доступности:
  - **`ACTIVE`**: Активна. Торговля разрешена.
  - **`VIEW_ONLY`**: Только просмотр. Новые ордера не принимаются.
  - **`MAINTENANCE`**: Тех. обслуживание. Торговля временно приостановлена.
  - **`INACTIVE`**: Неактивна. Торговля приостановлена и может быть возобновлена.
  - **`DEPRECATED`**: Устарела. Неактивна и никогда не будет восстановлена, сохранена для истории.

## 4. Сценарии использования (кейсы)

- **Запуск торгов по новой паре**: Администратор создает `CurrencyPair` со статусом `ACTIVE`.
- **Обновление торгового движка**: Статус пары временно переводится в `MAINTENANCE`.
- **Процесс делистинга**: Статус меняется на `VIEW_ONLY`, а затем на `DEPRECATED`.

## 5. Связи с другими моделями

- **`Currency`**: `CurrencyPair` **ссылается** на две `Currency`.
- **`CurrencyPairPolicy`**: `CurrencyPair` **управляется** одной политикой.
