# Модель: NetworkAccount

## 1. Описание

**`NetworkAccount`** — это ассоциативная модель (модель-связка), которая соединяет `Network` и `Account`. Она представляет собой запись о том, что определенный аккаунт является участником определенной сети.

## 2. Назначение и решаемые задачи

Основная задача этой модели — эффективно отслеживать участие аккаунтов (а значит, и их владельцев — пользователей или сообществ) в различных сетях, а также управлять состоянием этого участия.

### Ключевые задачи:
- **Фиксация участия**: Создание записи `NetworkAccount` формально означает, что `Account` присоединился к `Network`.
- **Управление состоянием через политики**: Поле `policy_id` позволяет применять к связи централизованно управляемые политики (`NetworkAccountPolicy`).
- **Оптимизация запросов**: Позволяет быстро ответить на вопросы:
  - "В каких сетях состоит данный аккаунт?"
  - "Какие аккаунты участвуют в данной сети?"

## 3. Ключевые поля и концепции

- `network_id`: ID сети, к которой присоединился аккаунт.
- `account_id`: ID аккаунта, который присоединился к сети.
- `policy_id`: Обязательное поле. Связь всегда подчиняется правилам, определенным в соответствующей `NetworkAccountPolicy`.

## 4. Сценарии использования (кейсы)

- **Регистрация в партнерской программе**: Когда `Account` присоединяется к `Network`, создается запись `NetworkAccount`.
- **Массовая блокировка**: Администратор применяет `policy_id` к группе `NetworkAccount` для централизованного управления.

## 5. Связи с другими моделями

- **`Network`**: `NetworkAccount` **ссылается** на одну `Network` (связь по `network_id`).
- **`Account`**: `NetworkAccount` **ссылается** на один `Account` (связь по `account_id`).
- **`NetworkAccountPolicy`**: `NetworkAccount` **управляется** одной политикой (связь по `policy_id`).
