# Сервис: AuthService

## 1. Описание

**`AuthService`** — это публичный клиентский сервис, который является единой точкой входа для **регистрации**, **авторизации**, **восстановления доступа** и **проверки реферальной информации**.

Ключевой особенностью этого сервиса является то, что он не выполняет действия напрямую, а **инициирует** процессы, возвращая `Confirmation` (сессию подтверждения), которую необходимо завершить через `ConfirmationService`.

## 2. Описание методов (RPC)

### `rpc CheckEmail(CheckEmailRequest) returns (CheckEmailResponse)`
- **Назначение**: Проверить, существует ли уже пользователь с таким email.

### `rpc Authorize(AuthorizeRequest) returns (biconom.types.Confirmation)`
- **Назначение**: Начать процесс входа для **существующего** пользователя.

### `rpc Register(RegisterRequest) returns (biconom.types.Confirmation)`
- **Назначение**: Начать процесс регистрации для **нового** пользователя.
- **Параметры**:
  - `email`: Email для нового аккаунта.
  - `oneof referral`: Необязательный типобезопасный указатель на спонсора.

### `rpc Recover(RecoverRequest) returns (biconom.types.Confirmation)`
- **Назначение**: Начать процесс восстановления доступа.

### `rpc GetReferralInfo(GetReferralInfoRequest) returns (GetReferralInfoResponse)`
- **Назначение**: Получить публичную информацию о спонсоре перед регистрацией.
- **Использование**: Это ключевой метод для UI регистрации. Когда пользователь вводит реферальный код или переходит по реферальной ссылке, клиент вызывает этот метод, чтобы получить и показать информацию о спонсоре (например, "Вы регистрируетесь под `Username`"). Это позволяет пользователю убедиться, что он попал к нужному человеку.
- **Параметры `GetReferralInfoRequest`**:
  - `oneof referral`: Типобезопасный указатель на `Distributor` или `ReferralLink`.
- **Ответ `GetReferralInfoResponse`**:
  - `optional referral_link`: Полная информация о реферальной ссылке, если она использовалась.
  - `account`: Информация об аккаунте спонсора.
  - `distributor`: Информация о дистрибьюторе-спонсоре.
